{"ast":null,"code":"'use strict';\n\nvar assert = require('assert-plus');\n\nvar DEFAULT_HEADERS = ['request-id', 'x-request-id'];\n/**\n * This plugin pulls the value from an incoming request header and uses it\n * as the value of the request id. Subsequent calls to `req.id()`\n * will return the header values.\n *\n * @public\n * @function reqIdHeaders\n * @param {Object}   opts - an options object\n * @param {String[]} opts.headers - array of headers from where to pull existing\n *                                request id headers. Lookup precedence\n *                                is left to right (lowest index first)\n * @returns {Function} Handler\n */\n\nfunction createReqIdHeaders(opts) {\n  assert.object(opts, 'opts');\n  assert.arrayOfString(opts.headers, 'opts.headers');\n  var headers = opts.headers.concat(DEFAULT_HEADERS);\n  return function reqIdHeaders(req, res, next) {\n    for (var i = 0; i < headers.length; i++) {\n      var val = req.header(headers[i]);\n\n      if (val) {\n        req.id(val);\n        break;\n      }\n    }\n\n    return next();\n  };\n} ///--- Exports\n\n\nmodule.exports = createReqIdHeaders;","map":null,"metadata":{},"sourceType":"script"}