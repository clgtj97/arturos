{"ast":null,"code":"// Copyright 2012 Mark Cavage, Inc.  All rights reserved.\n'use strict'; ///--- Helpers\n\n/**\n * Cleans up sloppy URLs on the request object, like /foo////bar/// to /foo/bar.\n *\n * @private\n * @function strip\n * @param    {Object} path - a url path to clean up\n * @returns  {String} cleaned path\n */\n\nfunction strip(path) {\n  var cur;\n  var next;\n  var str = '';\n\n  for (var i = 0; i < path.length; i++) {\n    cur = path.charAt(i);\n\n    if (i !== path.length - 1) {\n      next = path.charAt(i + 1);\n    }\n\n    if (cur === '/' && (next === '/' || next === '?' && i > 0)) {\n      continue;\n    }\n\n    str += cur;\n  }\n\n  return str;\n}\n/**\n * Cleans up sloppy URLs on the request object,\n * like `/foo////bar///` to `/foo/bar`.\n *\n * @public\n * @function sanitizePath\n * @returns  {Function} Handler\n */\n\n\nfunction sanitizePath() {\n  function _sanitizePath(req, res, next) {\n    req.url = strip(req.url);\n    next();\n  }\n\n  return _sanitizePath;\n} ///--- Exports\n\n\nmodule.exports = sanitizePath;","map":null,"metadata":{},"sourceType":"script"}